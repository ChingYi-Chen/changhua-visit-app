# db.pyimport osimport sqlite3from pathlib import PathDB_PATH = Path(os.getenv("DB_PATH", "local.db"))def get_conn():    conn = sqlite3.connect(DB_PATH, check_same_thread=False)    conn.row_factory = sqlite3.Row    return conndef init_db():    conn = get_conn()    cur = conn.cursor()    cur.execute("""    CREATE TABLE IF NOT EXISTS users (      id INTEGER PRIMARY KEY AUTOINCREMENT,      username TEXT UNIQUE NOT NULL,      password_hash TEXT NOT NULL,      created_at TEXT DEFAULT CURRENT_TIMESTAMP    )    """)    cur.execute("""    CREATE TABLE IF NOT EXISTS cases (      id INTEGER PRIMARY KEY AUTOINCREMENT,      user_id INTEGER NOT NULL,      case_id TEXT NOT NULL,      name TEXT NOT NULL,      address_raw TEXT,      address_fixed TEXT,      town TEXT,      lat REAL,      lng REAL,      geo_status TEXT DEFAULT 'FAIL',      updated_at TEXT DEFAULT CURRENT_TIMESTAMP,      UNIQUE(user_id, case_id),      FOREIGN KEY(user_id) REFERENCES users(id)    )    """)    cur.execute("""    CREATE TABLE IF NOT EXISTS geocode_cache (      addr_norm TEXT PRIMARY KEY,      lat REAL,      lng REAL,      updated_at TEXT DEFAULT CURRENT_TIMESTAMP    )    """)    conn.commit()    conn.close()